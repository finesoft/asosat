<?xml version="1.0" encoding="UTF-8"?>
<query-mappings
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<common-segment>
		This is common segment!
	</common-segment>
	<query name="Order.select" result-class="java.util.Map"
		cache="true" cache-resuleset-metadata="false">
		<script>
			<![CDATA[
				SELECT * FROM AT_ORD WHERE 1=1
				<#if ids??>
					AND id IN (${SP(ids)})
				</#if>
				<#if seller??>
					AND seller = ${SP(seller)}
				</#if>
			]]>
		</script>
		<fetch-query reference-query="OrderItem.select"
			inject-property-name="items">
			<parameter name="orderId" source="R" source-name="id" />
		</fetch-query>
	</query>

	<query name="OrderItem.select" result-class="java.util.Map"
		cache="true" cache-resuleset-metadata="false">
		<script>
			<![CDATA[
				SELECT * FROM AT_ORD_ITM WHERE 1=1
				<#if orderId??>
					AND orderId = ${SP(orderId)}
				</#if>
			]]>
		</script>
	</query>
</query-mappings>